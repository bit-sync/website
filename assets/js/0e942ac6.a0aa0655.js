"use strict";(self.webpackChunkbit_sync_web=self.webpackChunkbit_sync_web||[]).push([[737],{355:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});var r=i(4848),l=i(8453);const s={sidebar_position:3},o="Bootloader",t={id:"echo-kernel/components/bootloader",title:"Bootloader",description:"The Echo Kernel bootloader is responsible for initializing essential system components and transitioning from the boot process to the kernel's execution. It serves as the critical bridge between hardware initialization and the kernel's main execution phase.",source:"@site/docs/echo-kernel/components/bootloader.mdx",sourceDirName:"echo-kernel/components",slug:"/echo-kernel/components/bootloader",permalink:"/docs/echo-kernel/components/bootloader",draft:!1,unlisted:!1,editUrl:"https://github.com/bit-sync/website/blob/main/docs/echo-kernel/components/bootloader.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Keyboard System",permalink:"/docs/echo-kernel/components/keyboard"},next:{title:"Standard Library",permalink:"/docs/echo-kernel/components/library"}},d={},c=[{value:"Features",id:"features",level:2},{value:"Boot Process",id:"boot-process",level:2},{value:"1. Early Initialization",id:"1-early-initialization",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Component Initialization",id:"component-initialization",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Usage",id:"usage",level:2},{value:"System Requirements",id:"system-requirements",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Memory",id:"memory",level:3},{value:"Limitations",id:"limitations",level:2},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"Technical Notes",id:"technical-notes",level:2},{value:"Memory Layout",id:"memory-layout",level:3},{value:"Hardware Interaction",id:"hardware-interaction",level:3},{value:"Control Flow",id:"control-flow",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"bootloader",children:"Bootloader"})}),"\n",(0,r.jsx)(n.p,{children:"The Echo Kernel bootloader is responsible for initializing essential system components and transitioning from the boot process to the kernel's execution. It serves as the critical bridge between hardware initialization and the kernel's main execution phase."}),"\n",(0,r.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"System component initialization"}),"\n",(0,r.jsx)(n.li,{children:"Interrupt handling setup"}),"\n",(0,r.jsx)(n.li,{children:"Display system initialization"}),"\n",(0,r.jsx)(n.li,{children:"Kernel launch sequence"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"boot-process",children:"Boot Process"}),"\n",(0,r.jsx)(n.h3,{id:"1-early-initialization",children:"1. Early Initialization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"void boot(void)\n"})}),"\n",(0,r.jsx)(n.p,{children:"The main boot function performs the following sequence:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"IDT Initialization"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Calls ",(0,r.jsx)(n.code,{children:"keyboard::idt_init()"})]}),"\n",(0,r.jsx)(n.li,{children:"Sets up interrupt handling infrastructure"}),"\n",(0,r.jsx)(n.li,{children:"Configures keyboard interrupt handler"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Display Setup"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Initializes video memory"}),"\n",(0,r.jsx)(n.li,{children:"Clears the screen"}),"\n",(0,r.jsx)(n.li,{children:"Prepares display for kernel output"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Kernel Launch"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Transfers control to kernel main function"}),"\n",(0,r.jsx)(n.li,{children:"Initiates system main loop"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,r.jsx)(n.h3,{id:"component-initialization",children:"Component Initialization"}),"\n",(0,r.jsx)(n.p,{children:"The bootloader ensures proper initialization of core system components:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interrupt System"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configures Interrupt Descriptor Table (IDT)"}),"\n",(0,r.jsx)(n.li,{children:"Sets up keyboard interrupt handler"}),"\n",(0,r.jsx)(n.li,{children:"Enables necessary interrupt lines"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Display System"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configures video memory access"}),"\n",(0,r.jsx)(n.li,{children:"Sets up text mode display"}),"\n",(0,r.jsx)(n.li,{children:"Prepares screen for output"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Kernel Handoff"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Prepares environment for kernel execution"}),"\n",(0,r.jsx)(n.li,{children:"Transfers control to kernel main function"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"The bootloader implements basic error detection:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Checks IDT initialization success"}),"\n",(0,r.jsx)(n.li,{children:"Verifies display system availability"}),"\n",(0,r.jsx)(n.li,{children:"Reports critical errors before halting"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"The bootloader relies on several system components:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"display"})," namespace for screen output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"keyboard"})," namespace for input handling and IDT setup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"kernel"})," namespace for main kernel functionality"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.p,{children:"The bootloader is typically invoked by the system's initial boot code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"bootloader::boot();\n"})}),"\n",(0,r.jsx)(n.h2,{id:"system-requirements",children:"System Requirements"}),"\n",(0,r.jsx)(n.h3,{id:"hardware",children:"Hardware"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"x86 compatible processor"}),"\n",(0,r.jsx)(n.li,{children:"Standard keyboard controller"}),"\n",(0,r.jsx)(n.li,{children:"VGA-compatible display adapter"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"memory",children:"Memory"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Minimum memory requirements determined by kernel"}),"\n",(0,r.jsx)(n.li,{children:"Video memory at 0xb8000"}),"\n",(0,r.jsx)(n.li,{children:"IDT space requirements"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,r.jsx)(n.p,{children:"Current implementation has several limitations:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Boot Options"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No configuration parameters"}),"\n",(0,r.jsx)(n.li,{children:"Single boot path only"}),"\n",(0,r.jsx)(n.li,{children:"No alternative boot modes"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Hardware Support"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Basic hardware initialization only"}),"\n",(0,r.jsx)(n.li,{children:"Limited device support"}),"\n",(0,r.jsx)(n.li,{children:"No advanced boot features"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Recovery"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Basic error detection only"}),"\n",(0,r.jsx)(n.li,{children:"No recovery mechanisms"}),"\n",(0,r.jsx)(n.li,{children:"Halts on critical errors"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,r.jsx)(n.p,{children:"Potential areas for improvement:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Boot parameters support"}),"\n",(0,r.jsx)(n.li,{children:"Multiple boot modes"}),"\n",(0,r.jsx)(n.li,{children:"Configuration file support"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Hardware Support"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Additional device initialization"}),"\n",(0,r.jsx)(n.li,{children:"Extended hardware detection"}),"\n",(0,r.jsx)(n.li,{children:"More robust error handling"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Boot Features"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Memory management initialization"}),"\n",(0,r.jsx)(n.li,{children:"Advanced boot options"}),"\n",(0,r.jsx)(n.li,{children:"Recovery mechanisms"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"technical-notes",children:"Technical Notes"}),"\n",(0,r.jsx)(n.h3,{id:"memory-layout",children:"Memory Layout"}),"\n",(0,r.jsx)(n.p,{children:"The bootloader assumes a specific memory layout:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"IDT location"}),"\n",(0,r.jsx)(n.li,{children:"Video memory at 0xb8000"}),"\n",(0,r.jsx)(n.li,{children:"Kernel load address"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"hardware-interaction",children:"Hardware Interaction"}),"\n",(0,r.jsx)(n.p,{children:"Direct hardware interaction through:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"I/O ports"}),"\n",(0,r.jsx)(n.li,{children:"Memory-mapped I/O"}),"\n",(0,r.jsx)(n.li,{children:"Interrupt vectors"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"control-flow",children:"Control Flow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"BIOS \u2192 Bootloader"}),"\n",(0,r.jsx)(n.li,{children:"Bootloader initialization"}),"\n",(0,r.jsx)(n.li,{children:"System component setup"}),"\n",(0,r.jsx)(n.li,{children:"Kernel handoff"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var r=i(6540);const l={},s=r.createContext(l);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);